<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<Migrations>
  <Migration EntityType="D" Name="ADempiere Seed" ReleaseNo="" SeqNo="390">
    <Step SeqNo="10" StepType="AD">
      <PO AD_Table_ID="53058" Action="U" Record_ID="50297" Table="AD_Rule">
        <Data AD_Column_ID="54257" Column="Script" oldValue="// E&#10;//&quot;8&#10;//!12&#10;//#22&#10;result = &quot; &quot;;&#10;MTax tax = MTax.get(_Ctx, _Document.get_ValueAsInt(&quot;C_Tax_ID&quot;));&#10;if(tax != null &#10;    &amp;&amp; tax.getRate() != null) {&#10;    double taxRate = tax.getRate().setScale(2, BigDecimal.ROUND_HALF_UP).doubleValue();&#10;    if(taxRate == 0)&#10;        result = &quot; &quot;;&#10;    else if(taxRate == 8)&#10;        result = &quot;\&quot;&quot;;&#10;    else if(taxRate == 12)&#10;        result = &quot;!&quot;;&#10;    else if(taxRate == 22)&#10;        result = &quot;#&quot;;&#10;}">// E
//"8
//!12
//#22
String value = " ";
MTax tax = MTax.get(_Ctx, _Document.get_ValueAsInt("C_Tax_ID"));
if(tax != null 
    &amp;&amp; tax.getRate() != null) {
    double taxRate = tax.getRate().setScale(2, BigDecimal.ROUND_HALF_UP).doubleValue();
    if(taxRate == 0)
        value = " ";
    else if(taxRate == 8)
        value = "\"";
    else if(taxRate == 12)
        value = "!";
    else if(taxRate == 22)
        value = "#";
}
result = value;</Data>
      </PO>
    </Step>
    <Step SeqNo="20" StepType="AD">
      <PO AD_Table_ID="53058" Action="U" Record_ID="50300" Table="AD_Rule">
        <Data AD_Column_ID="54257" Column="Script" oldValue="BigDecimal discountAmt = (BigDecimal) _Document.get_Value(&quot;DiscountAmt&quot;);&#10;result = &quot;&quot;;&#10;if(discountAmt != null) {&#10;  String sign = null;&#10;  if(discountAmt.signum() &gt; 0) {&#10;    sign = &quot;-&quot;;&#10;  } else if(discountAmt.signum() &lt; 0) {&#10;    sign = &quot;+&quot;;&#10;  }&#10;  if(sign != null) {&#10;    String value = String.format(&quot;%.2f&quot;, new Object[]{discountAmt}).replace(&quot;.&quot;, &quot;&quot;).replace(&quot;,&quot;, &quot;&quot;);&#10;    value = String.format(&quot;%1$&quot; + 9 + &quot;s&quot;, new Object[]{value}).replace(&quot; &quot;, &quot;0&quot;);&#10;    result = sign + value;&#10;  }&#10;}">BigDecimal discountAmt = (BigDecimal) _Document.get_Value("DiscountAmt");
String finalValue = "";
if(discountAmt != null) {
  String sign = null;
  if(discountAmt.signum() &gt; 0) {
    sign = "-";
  } else if(discountAmt.signum() &lt; 0) {
    sign = "+";
  }
  if(sign != null) {
    String value = String.format("%.2f", new Object[]{discountAmt}).replace(".", "").replace(",", "");
    value = String.format("%1$" + 9 + "s", new Object[]{value}).replace(" ", "0");
    finalValue = sign + value;
  }
}
result = finalValue;</Data>
      </PO>
    </Step>
    <Step SeqNo="30" StepType="AD">
      <PO AD_Table_ID="53058" Action="U" Record_ID="50301" Table="AD_Rule">
        <Data AD_Column_ID="54257" Column="Script" oldValue="// T=20=Account&#10;// K=07=Check&#10;// C=14=Credit Card&#10;// D=13=Direct Debit&#10;// A=19=Direct Deposit&#10;// X=01=Cash&#10;result = &quot;01&quot;;&#10;// Evaluate&#10;String tenderType = (String) _Document.get_Value(&quot;TenderType&quot;);&#10;if(tenderType == null || tenderType.equals(&quot;X&quot;)) {&#10;  result = &quot;01&quot;;&#10;} else if(tenderType.equals(&quot;T&quot;)) {&#10;  result = &quot;20&quot;;&#10;} else if(tenderType.equals(&quot;K&quot;)) {&#10;  result = &quot;07&quot;;&#10;} else if(tenderType.equals(&quot;C&quot;)) {&#10;  result = &quot;14&quot;;&#10;} else if(tenderType.equals(&quot;D&quot;)) {&#10;  result = &quot;13&quot;;&#10;} else if(tenderType.equals(&quot;A&quot;)) {&#10;  result = &quot;19&quot;;&#10;}">// T=20=Account
// K=07=Check
// C=14=Credit Card
// D=13=Direct Debit
// A=19=Direct Deposit
// X=01=Cash
String value = "01";
// Evaluate
String tenderType = (String) _Document.get_Value("TenderType");
if(tenderType == null || tenderType.equals("X")) {
  value = "01";
} else if(tenderType.equals("T")) {
  value = "20";
} else if(tenderType.equals("K")) {
  value = "07";
} else if(tenderType.equals("C")) {
  value = "14";
} else if(tenderType.equals("D")) {
  value = "13";
} else if(tenderType.equals("A")) {
  value = "19";
}
result = value;</Data>
      </PO>
    </Step>
    <Step SeqNo="40" StepType="AD">
      <PO AD_Table_ID="53058" Action="U" Record_ID="50303" Table="AD_Rule">
        <Data AD_Column_ID="54257" Column="Script" oldValue="import java.text.SimpleDateFormat;&#10;SimpleDateFormat format = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);&#10;Timestamp date = (Timestamp) _Document.get_Value(&quot;ReversalDocumentDate&quot;);&#10;// Set result&#10;result = format.format(date);">import java.text.SimpleDateFormat;
SimpleDateFormat format = new SimpleDateFormat("dd/MM/yyyy");
Timestamp date = (Timestamp) _Document.get_Value("ReversalDocumentDate");
// Set result
String value = format.format(date);
result = value;</Data>
      </PO>
    </Step>
    <Step SeqNo="50" StepType="AD">
      <PO AD_Table_ID="53058" Action="U" Record_ID="50304" Table="AD_Rule">
        <Data AD_Column_ID="54257" Column="Script" oldValue="//0=E&#10;//1=8&#10;//2=12&#10;//3=22&#10;result = &quot; &quot;;&#10;MTax tax = MTax.get(_Ctx, _Document.get_ValueAsInt(&quot;C_Tax_ID&quot;));&#10;if(tax != null &#10;    &amp;&amp; tax.getRate() != null) {&#10;    double taxRate = tax.getRate().setScale(2, BigDecimal.ROUND_HALF_UP).doubleValue();&#10;    if(taxRate == 0)&#10;        result = &quot;0&quot;;&#10;    else if(taxRate == 12)&#10;        result = &quot;1&quot;;&#10;    else if(taxRate == 8)&#10;        result = &quot;2&quot;;&#10;    else if(taxRate == 22)&#10;        result = &quot;3&quot;;&#10;}">//0=E
//1=8
//2=12
//3=22
String value = " ";
MTax tax = MTax.get(_Ctx, _Document.get_ValueAsInt("C_Tax_ID"));
if(tax != null 
    &amp;&amp; tax.getRate() != null) {
    double taxRate = tax.getRate().setScale(2, BigDecimal.ROUND_HALF_UP).doubleValue();
    if(taxRate == 0)
        value = "0";
    else if(taxRate == 12)
        value = "1";
    else if(taxRate == 8)
        value = "2";
    else if(taxRate == 22)
        value = "3";
}
result = value;</Data>
      </PO>
    </Step>
  </Migration>
</Migrations>
